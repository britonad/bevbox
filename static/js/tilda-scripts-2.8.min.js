function t_throttle(t,e,o){var i,n;return e||(e=250),function(){var r=o||this,s=+new Date,a=arguments;i&&s<i+e?(clearTimeout(n),n=setTimeout(function(){i=s,t.apply(r,a)},e)):(i=s,t.apply(r,a))}}window.isSearchBot=!1,function(t){if($isMobile=!1,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&($isMobile=!0),/Bot/i.test(navigator.userAgent)&&(window.isSearchBot=!0),window.isMobile=$isMobile,1==$isMobile){var e=function(){for(var e=document.body.querySelectorAll(".t-cover__carrier"),o=t(window).height(),i=0,n=0,r=e.length;n<r;n++)(a=(s=e[n]).style).height.indexOf("vh")>-1&&(i=parseInt(a.height)/100,c=Math.round(o*i)+"px",(l=t(s).parent(".t-cover"))&&(l=l[0])&&(d=l.querySelector(".t-cover__filter"),h=l.querySelector(".t-cover__wrapper"),d&&(d.style.height=c),h&&(h.style.height=c),a.height=l.style.height=c));var s,a,c,l,d,h,u=document.body.querySelectorAll("[data-height-correct-vh]");for(o=t(window).height(),i=0,n=0,r=u.length;n<r;n++)(a=(s=u[n]).style).height.indexOf("vh")>-1&&(i=parseInt(a.height)/100,c=o+"px",l=t(s).parent(".t-cover"),a.height=c)};t(document).ready(function(){setTimeout(function(){e()},400)}),t(window).load(function(){setTimeout(function(){e()},400)})}1==$isMobile&&(t(window).width()<480?(t(document).ready(function(){var e;t("div[data-customstyle=yes]").each(function(e){t(this).css("font-size").replace("px","")>26&&(t(this).css("font-size",""),t(this).css("line-height",""))}),t("[field]").find("span").each(function(e){t(this).css("font-size").replace("px","")>26&&t(this).css("font-size","")}),t(".t-title, .t-name, .t-heading, .t-descr, .t-text, .t-subtitle").not(".tn-elem, .tn-atom").each(function(o){if(void 0!==(e=t(this).attr("style"))&&""!=e&&e.indexOf("font-size")>-1&&t(this).css("font-size").replace("px","")>26){var i=e.replace("font-size","fontsize").replace("line-height","lineheight");t(this).attr("style",i)}})}),t(window).load(function(){var e=t(window).width();t(".r").each(function(){var o=t(this);t(this).find("div").not("[data-auto-correct-mobile-width=false], .tn-elem, .tn-atom").each(function(){var i=parseInt(t(this).outerWidth(!0));i>e&&(console.log("Block not optimized for mobile width. Block width:"+i+" Block id:"+o.attr("id")),console.log(t(this)),o.css("overflow","auto"),i-3>e&&o.css("word-break","break-all"))})})})):t(window).width()<900&&t(document).ready(function(){var e;t("div[data-customstyle=yes]").each(function(e){t(this).css("font-size").replace("px","")>30&&(t(this).css("font-size",""),t(this).css("line-height",""))}),t("[field]").find("span").each(function(e){t(this).css("font-size").replace("px","")>30&&t(this).css("font-size","")}),t(".t-title, .t-name, .t-heading, .t-descr, .t-text, .t-subtitle").not(".tn-elem, .tn-atom").each(function(o){if(void 0!==(e=t(this).attr("style"))&&""!=e&&e.indexOf("font-size")>-1&&t(this).css("font-size").replace("px","")>30){var i=e.replace("font-size","fontsize").replace("line-height","lineheight");t(this).attr("style",i)}})}))}(jQuery),function(t){function e(){this.setScrollListener()}e.prototype.videoTags=[],e.prototype.defaultConfig={isNeedStop:!1},e.prototype.videoConfigs=[],e.prototype.registerNewVideo=function(t,e){if(!(t instanceof HTMLVideoElement))throw new Error("Wrong tag passed into registerNewVideo");return-1==this.videoTags.indexOf(t)&&(this.videoTags.push(t),this.videoConfigs.push(void 0===e?this.defaultConfig:e),this.scrollCb(),!0)},e.prototype.unergisterVideo=function(t){if(!(t instanceof HTMLVideoElement))throw new Error("Wrong tag passed into unregisterNewVideo");var e;return(e=this.videoTags.indexOf(t))>-1&&("function"==typeof t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t),this.pauseVideo(t,this.videoConfigs[e]),this.videoTags.splice(e,1),this.videoConfigs.splice(e,1),!0)},e.prototype.pauseVideo=function(t,e){if(!e)throw new Error("Wrong config type!");t.pause(),e.isNeedStop&&t.load()},e.prototype.setScrollListener=function(){t(window).bind("scroll",t_throttle(jQuery.proxy(this.scrollCb,this),200))},e.prototype.scrollCb=function(){for(var e=t(window).height(),o=null,i=0,n=this.videoTags.length;i<n;i++){if(o=this.videoTags[i],_vrect=this.getVideoBoundingRect(o,!1),Math.abs(_vrect.top)<e&&Math.abs(_vrect.top)>e/2){var r=1-(Math.abs(_vrect.top)-e/2)/(e/2)-.2;r>0&&r<=1&&0!=o.volume&&(o.volume=r)}Math.abs(_vrect.top)>e||0==_vrect.height?this.pauseVideo(o,this.videoConfigs[i]):o.paused&&o.play()}},e.prototype.getVideoObject=function(t){for(var e=0,o=this.videoTags.length;e>o;e++){var i=this.videoTags[e];if(i.v===t)return i}return null},e.prototype.getVideoBoundingRect=function(e,o){void 0===o&&(o=!0);var i=null;return o&&(i=t(e).parents(".r")[0])||(i=e),i.getBoundingClientRect()},window.videoLoadProcessor=new e}(jQuery),function(t){function e(){this.setScrollCb(),this.itemHeight=screen.availHeight,this.itemTransitionTop=.25*this.itemHeight,this.activeItemIndex=null,this.windowHeight=document.documentElement.clientHeight||window.innerHeight||screen.availHeight,this.topOffsetShift=-150,t(window).resize(jQuery.proxy(this.recalculateAllSequencesOffsets,this)),this._resizeInterval=setInterval(jQuery.proxy(this.scrollCb,this),500)}function o(e){var o,i=t("#rec"+e),n=i.find(".t-cover").height();(o=i.find("div[data-hook-content]").outerHeight())>300&&n<o+40&&((o+=120)>1e3&&(o+=100),console.log("auto correct cover height: "+o),i.find(".t-cover").height(o),i.find(".t-cover__filter").height(o),i.find(".t-cover__carrier").height(o),i.find(".t-cover__wrapper").height(o),0==$isMobile&&setTimeout(function(){var t=i.find(".t-cover__carrier");t.find("iframe").length>0&&(console.log("correct video from cover_fixcontentheight"),r(t,o+"px")),t.find("video").length>0&&console.log("correct html5video from cover_fixcontentheight")},2e3))}function i(t,e,o,i){var n,r,s,a,c;n=t.offset().top,r=t.height(),s=e.scrollTop(),a=e.height(),c=o.getPlayerState(),s+a>n&&s<=n+r?(1!==c&&o.playVideo(),"yes"==i&&(s>n+r-100?o.setVolume(30):s>n+r-200?o.setVolume(70):s+a<n+200?o.setVolume(30):o.setVolume(100))):s+a<n&&s+a>n-500?2!==c&&(o.playVideo(),o.pauseVideo()):2!==c&&o.pauseVideo()}e.prototype.defaultConfig={orientation:"vertical",speedFactor:1,automated:!1},e.prototype.sequenceObjects=[],e.prototype.recalculateAllSequencesOffsets=function(){this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeInterval&&clearInterval(this._resizeInterval),this._resizeTimeout=setTimeout(jQuery.proxy(function(){this.scrollCb(),this._resizeInterval=setInterval(jQuery.proxy(this.scrollCb,this),500)},this),10)},e.prototype.registerNewBlock=function(t){if(!(t instanceof HTMLElement))throw new Error("Wrong node type in registerNewBlock");for(var e=0,o=this.sequenceObjects.length;e<o;e++)if(this.sequenceObjects[e].sequenceBlock===t)return!1;var i=t.querySelector('[data-hook="sequence-holder"]'),n=0,r=this.getAbsoluteTopOffset(i),s=function(){var e=[];return Array.prototype.slice.call(t.querySelectorAll('[data-hook="sequence-item"]'),0).forEach(jQuery.proxy(function(t,o,i){var r=this.getItemHeight(t),s=t.querySelector('[data-hook="item-background"]');t.style.height=r+"px",s.style.height=this.itemHeight+"px",o<i.length-1&&(n+=r),e.push({node:t,height:r,topOffset:this.getAbsoluteTopOffset(t.querySelector(".txt-holder"))-(o==i.length-1?0:this.topOffsetShift),backgroundHolder:s})},this)),e}.call(this),a=(this.itemHeight,{sequenceBlock:t,sequenceHolder:i,sequenceHolderTopOffset:r,sequenceHeight:n,items:s,started:!1,prevBackgroundColor:""});return this.sequenceObjects.push(a),this.scrollCb(),!0},e.prototype.getItemHeight=function(t){var e=t.querySelector("[data-hook='item-text']");t.querySelector("[data-hook='item-background']"),st=t.style;var o=parseFloat(getComputedStyle(e).top);return e.style.top=o+"px",Math.max(e.clientHeight+o,this.itemHeight)},e.prototype.fixTextBlocksPosition=function(t){txtBlocks=Array.prototype.slice.call(t.querySelectorAll('[data-hook="item-text"]'),0),txtBlocks.forEach(function(t,e,o){t.parentNode.querySelector("[data-hook='item-background']").style.top="-"+t.clientHeight+"px"})},e.prototype.unergisterBlock=function(t){for(var e=0,o=this.sequenceObjects.length,i=null;e<o;e++)if(this.sequenceObjects[e].sequenceBlock===t){i=e;break}return null!==i&&(this.sequenceObjects.splice(i,1),!0)},e.prototype.getAbsoluteTopOffset=function(t){var e=t.offsetTop;for(t=t.offsetParent;null!=t;)e+=t.offsetTop,t=t.offsetParent;return e},e.prototype.processSequence=function(t){0==t.started&&(t.prevBackgroundColor=document.body.style.backgroundColor,document.body.style.backgroundColor="rgb(0, 0, 0)",t.started=!0),t.sequenceBlock,t.sequenceHolder;for(var e,o,i,n,r=t.items,s=null,a=0,c=r.length;a<c;a++)if((e=r[a].node).querySelector(".txt-holder"),(n=e.getBoundingClientRect()).top<this.itemTransitionTop&&n.bottom<n.height+this.itemTransitionTop&&n.bottom>this.itemTransitionTop){s=a;break}if(null!=s)for((i=n.top/this.itemTransitionTop)>1?i=1:i<0&&(i=0),a=0,c=r.length;a<c;a++)e=r[a].node,"fixed"!=(o=r[a].backgroundHolder.style).position&&(o.position="fixed"),a==s?(o.opacity=1-i,e.querySelector(".txt-holder").style.opacity=1-i):a==s-1?(o.opacity=i,e.querySelector(".txt-holder").style.opacity=i):(o.opacity=0,e.querySelector(".txt-holder").style.opacity=0)},e.prototype.stopSequence=function(t){0!=t.started&&(t.items.forEach(function(t,e,o){t.backgroundHolder.style.position="relative",t.backgroundHolder.style.display="block",t.backgroundHolder.style.opacity=1}),document.body.style.backgroundColor=t.prevBackgroundColor,t.started=!1)},e.prototype.scrollCb=function(){t(window).scrollTop();for(var e,o=0,i=this.sequenceObjects.length;o<i;o++){var n=(e=this.sequenceObjects[o]).sequenceHolder.getBoundingClientRect();n.top<0&&n.bottom>0&&n.bottom>n.height-e.sequenceHeight-100?this.processSequence(e):this.stopSequence(e)}},e.prototype.setScrollCb=function(){this._scrollCb=jQuery.proxy(this.scrollCb,this),t(window).bind("scroll",t_throttle(this._scrollCb,200))},window.sequenceController=new e,window.processVideo=function(e){mp4Src=t(e).attr("data-content-video-url-mp4"),webmSrc=t(e).attr("data-content-video-url-webm"),t(e).css("background-color","transparent"),t(e).css("background-image","");var o={mp4:mp4Src,webm:webmSrc,preload:"none",autoplay:!1,loop:!0,scale:!0,zIndex:0,width:"100%"};vid=t(e).videoBG(o),videoLoadProcessor.registerNewVideo(vid,{isNeedStop:!1})},window.cover_init=function(e){t(document).ready(function(){var i=document.body.querySelector("#coverCarry"+e),n=t(i),r=n.attr("data-content-cover-bg"),s=n.attr("data-content-cover-height"),a=n.attr("data-content-cover-parallax"),c=n.attr("data-content-video-url-mp4"),l=n.attr("data-content-video-url-webm"),d=n.attr("data-content-video-url-youtube"),h=n.attr("data-content-video-noloop"),u=n.attr("data-content-video-nomute"),p=n.attr("data-content-bg-base64"),f=n.attr("data-content-video-nocover");r||(r=""),s||(s=""),a||(a=""),c||(c=""),l||(l=""),d||(d=""),h||(h=""),u||(u=""),d||(d=""),p||(p=""),f&&"yes"==f&&(c="",l="",d=""),!$isMobile||""==l&&""==c&&""==d||n.css("background-image","url('"+r+"')"),setTimeout(function(){o(e)},500);var v=t("#rec"+e).find("img[data-hook-clogo]");if(v.length&&v.load(function(){setTimeout(function(){o(e)},500)}),$isMobile&&t(window).on("orientationchange",function(){o(e)}),(""!==c||""!==l||""!==d)&&0==$isMobile)if(""!=d||""==c&&""==l)""!=d&&(n.css("background-color","#000000"),n.css("background-image",""),n.attr("data-content-cover-bg",""),b=0,(x=t(window)).scroll(function(){m&&window.clearTimeout(m),m=window.setTimeout(function(){var t,e,o;(b=n.find("iframe").length)>0||(t=n.offset().top,e=n.height(),(o=x.scrollTop())+x.height()>t-500&&o<=t+e+500&&processYoutubeVideo(i,s))},100)}),x.scroll());else{if(n.css("background-color","#000000"),n.css("background-image","url('https://tilda.ws/img/spinner-white.gif')"),n.css("background-size","auto"),n.attr("data-content-cover-bg",""),""!=h)var g=!1;else g=!0;if(""!=u)var w=1;else w="";var m,y="";"fixed"==a&&(s.indexOf("vh")>-1&&parseInt(s)>100&&(n.css("height","100vh"),y="yes"),s.indexOf("px")>-1&&parseInt(s)>t(window).height()&&(n.css("height","100vh"),y="yes"));var b="",x=t(window),T=n.parent();x.scroll(function(){var t,e,o;m&&window.clearTimeout(m),m=window.setTimeout(function(){var t,e,o;if(!(b>0)&&(t=n.offset().top,e=n.height(),(o=x.scrollTop())+x.height()>t-500&&o<=t+e+500)){var i=n.videoBG({mp4:c,webm:l,poster:"",preload:"none",autoplay:!1,loop:g,volume:w,scale:!0,zIndex:0,width:"100%"});videoLoadProcessor.registerNewVideo(i),b=1}},100),"fixed"==a&&"yes"==y&&(t=T.offset().top,e=T.height(),(o=x.scrollTop())>=t+e-x.height()?(n.css("position","absolute"),n.css("bottom","0px"),n.css("top","auto")):o>=t?(n.css("position","fixed"),n.css("top","0px")):o<t&&(n.css("position","relative"),n.css("top","auto")))}),x.scroll()}"dynamic"==a&&0==$isMobile&&n.parallax("50%",.2,!0),"yes"==p&&""!=r&&""==c&&""==l&&""==d&&(t("<img/>").attr("src",r).load(function(){t(this).remove(),n.css("background-image","url('"+r+"')"),n.css("opacity","1")}),n.css("background-image",""),n.css("opacity","0"),n.css("transition","opacity 25ms"));var k=t("#rec"+e).find(".t-cover__arrow-wrapper");k.length>0&&k.click(function(){var o=t("#rec"+e).height();o>0&&t("html, body").animate({scrollTop:t("#rec"+e).offset().top+o},500)})})},t(document).ready(function(){t(".t-cover__carrier").each(function(){var e=t(this).attr("data-content-cover-id");e>0&&cover_init(e)})});var n=t.Deferred();function r(e,o){console.log("setWidthHeightYoutubeVideo:"+o);var i=e.find("iframe"),n=e.attr("data-content-video-nocover"),r=e.attr("data-content-video-noadcut-youtube"),s=e.attr("data-content-video-ratio"),a=.5625;if(s>0&&(a=1*parseFloat(s)),"yes"!=n){if(o||(o="100vh"),o.indexOf("vh")>-1){var c=window.innerHeight;c||(c=t(window).height());var l=Math.floor(c*(parseInt(o)/100))}else l=parseInt(o);var d=Math.floor(parseInt(window.innerWidth));d||(d=t(window).width());var h=d,u=y=d*a,p=y,f=1;"yes"==r||(u=u+110+110,p=y-220),p<l&&(f=y<l?l/y+.02:y/l+.02);var v=Math.floor(h*f),g=Math.floor(u*f),w=g-l,m=v-d;i.height(g+"px"),i.width(v+"px"),w>0&&i.css("margin-top",-Math.floor(w/2)+"px"),m>0&&i.css("margin-left",-Math.floor(m/2)+"px")}else{var y;o||(y=Math.floor(e.width()*a)),o&&o.indexOf("vh")>-1?y=Math.floor(window.innerHeight*(parseInt(o)/100)):o&&(y=parseInt(o)),i.css("width","100%"),i.height(y+"px")}}window.processYoutubeVideo=function(e,o){!function(){if("yes"!==window.loadytapi_flag){window.loadytapi_flag="yes";var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}}(),n.then(function(){var n,s=t(e),a=s.attr("data-content-video-url-youtube"),c=s.attr("data-content-video-nomute"),l=s.attr("data-content-video-noloop"),d=s.attr("data-content-video-nocover"),h=document.createElement("iframe");h.src=function(t,e,o){-1==t.indexOf("https://www.youtube.com/embed")&&(t="https://www.youtube.com/embed"+("/"==t[0]?t:"/"+t));var i=location.protocol+"//"+location.host;return"yes"!=e?(t[t.length-1],t=t+"?autoplay=1&loop=1&enablejsapi=1&&playerapiid=featuredytplayer&controls=0&modestbranding=1&rel=0&showinfo=0&color=white&iv_load_policy=3&theme=light&wmode=transparent&origin="+i+"&playlist="+function(e){for(var o=t.split("/"),i=null,n=0,r=o.length;n<r;n++)"embed"==o[n]&&(i=o[n+1]);return i}()):(t[t.length-1],t=t+"?autoplay=0&loop=0&enablejsapi=1&&playerapiid=featuredytplayer&controls=1&modestbranding=1&rel=0&showinfo=0&color=black&iv_load_policy=3&theme=dark&wmode=transparent&origin="+i),"yes"!==o&&(t+="&mute=1"),t}(a,d,c),h.frameBorder=0,h.allow="autoplay",e.appendChild(h),0==$isMobile&&new YT.Player(h,{events:{onReady:function(o){var n,r,s,a,l,d,h;n=e,r=o.target,s=c,l=t(window),d=t(n),h=0,l.scroll(function(){a&&(window.clearTimeout(a),h>=15&&(i(d,l,r,s),h=0),h++),a=window.setTimeout(function(){i(d,l,r,s),h=0},100)}),l.scroll(),o.target.setVolume&&"yes"!=c&&o.target.setVolume(0),o.target.setLoop(!0)},onStateChange:function(e){if(e.target.setVolume&&"yes"!=c&&e.target.setVolume(0),-1===e.data){var o=window.fix_scrolltop_beforestop_youtube;o>=0&&(t("html, body").scrollTop(o),delete window.fix_scrolltop_beforestop_youtube)}e.data===YT.PlayerState.PLAYING?n=window.setInterval(function(){var t=e.target.getCurrentTime(),o=e.target.getDuration();t+1>o&&0!==o&&(e.target.seekTo(0),"yes"===l&&(e.target.stopVideo(),e.target.clearVideo()))},1e3):window.clearTimeout(n)}}}),r(s,o)})},window.onYouTubeIframeAPIReady=function(){n.resolve()}}(jQuery),function(t){function e(){this.callbacks={}}e.prototype.defaultConfig={single:!1,context:null},e.prototype.addEventListener=function(t,e,o){evtCallbacks=this._getEventCallbacks(t),evtCallbacks||(evtCallbacks=this.callbacks[t]=[]),evtCallbacks.push({callback:e,config:"object"==typeof o?o:this.defaultConfig})},e.prototype._getEventCallbacks=function(t){return this.callbacks[t]},e.prototype.removeEventListener=function(t,e){var o=this._getEventCallbacks(t);if(!o)return!1;for(var i=0,n=o.length;i<n;i++)if(e===o[i].callback)return o.splice(i,1),!0;return!1},e.prototype.emitEvent=function(t,e){var o=[];extend(o,this._getEventCallbacks(t));for(var i,n,r,s=0,a=o.length;s<a;s++)n=(i=o[s]).callback,(r=i.config).context?n.call(r.context,e):n(e),r.single&&this.removeEventListener(t,n)},window.observer=new e}(jQuery),function(t){t(document).ready(function(){if(0==$isMobile&&"yes"!==t("#allrecords").attr("data-blocks-animationoff")&&0==window.isSearchBot){t(".r").each(function(e){t(this).attr("style")&&-1!==t(this).attr("style").indexOf("background-color")&&t(this).attr("data-animationappear","off")});var e=t(".r").not("[data-animationappear=off], [data-screen-min], [data-screen-max]"),o=t(window);function i(){if(e.length)for(var i,n=e.length-1;n>=0;n--)(i=t(e[n])).offset().top<o.scrollTop()+o.height()-100&&(i.removeClass("r_hidden"),i.addClass("r_showed"),e.splice(n,1))}e.each(function(e){a=t(this).offset().top,b=o.scrollTop()+o.height()+300,a>1e3&&a>b?t(this).addClass("r_hidden"):t(this).addClass("r_showed"),t(this).addClass("r_anim")}),o.bind("scroll",t_throttle(i,200)),i()}t("body").height()+70<t(window).height()&&t(".t-tildalabel").css("display","none")})}(jQuery),function(t){function e(){var e=t(window);window.winWidth=e.width(),window.winHeight=e.height()}function o(){var e,o,i,n=t(window).width();t("div.r[data-screen-max], div.r[data-screen-min]").each(function(r){i=t(this).css("display"),void 0===(e=t(this).attr("data-screen-max"))&&(e=1e4),e=parseInt(e),void 0===(o=t(this).attr("data-screen-min"))&&(o=0),(o=parseInt(o))<=e&&(n<=e&&n>o?"block"!=i&&t(this).css("display","block"):"none"!=i&&t(this).css("display","none"))})}t(document).ready(function(){e(),o(),t(window).bind("resize",t_throttle(e,200)),t(window).bind("resize",t_throttle(o,200))})}(jQuery),function(t){t.fn.videoBG=function(e,o){if(o={},"object"==typeof e)o=t.extend({},t.fn.videoBG.defaults,e);else{if(e)return t(e).videoBG(o);o=t.fn.videoBG.defaults}var i=t(this);if(i.length){"static"!=i.css("position")&&i.css("position")||i.css("position","relative"),0==o.width&&(o.width=i.width()),0==o.height&&(o.height=i.height()),o.textReplacement&&(o.scale=!0,i.width(o.width).height(o.height).css("text-indent","-9999px"));var n=t.fn.videoBG.video(o);return o.scale&&n.height(o.height).width(o.width),i.append(n),void 0===i.attr("data-content-video-nomute")&&i.find("video").prop("muted",!0),function(e,o){var i=e.closest(".t-cover__carrier"),n=o+"";console.log("setWidthHeightHTMLVideo:"+n);var r=i.find("video"),s=i.attr("data-content-video-nocover"),a=i.attr("data-content-video-ratio"),c=.5625;if(a>0&&(c=1*parseFloat(a)),"yes"!=s){if(n||(n="100vh"),n.indexOf("vh")>-1){var l=window.innerHeight;l||(l=t(window).height());var d=Math.floor(l*(parseInt(n)/100))}else d=parseInt(n);var h=Math.floor(parseInt(window.innerWidth));h||(h=t(window).width());var u=h,p=y=h*c,f=1;y<d&&(f=y<d?d/y+.02:y/d+.02);var v=Math.floor(u*f),g=Math.floor(p*f),w=g-d,m=v-h;r.height(g+"px"),r.width(v+"px"),w>0&&r.css("margin-top",-Math.floor(w/2)+"px"),m>0&&r.css("margin-left",-Math.floor(m/2)+"px")}else{var y;n||(y=Math.floor(i.width()*c)),n&&n.indexOf("vh")>-1?y=Math.floor(window.innerHeight*(parseInt(n)/100)):n&&(y=parseInt(n)),r.css("width","100%"),r.height(y+"px")}}(n,o.height),n.find("video")[0]}},t.fn.videoBG.setFullscreen=function(e){var o,i=t(window).width(),n=t(window).height();e.css("min-height",0).css("min-width",0),e.parent().width(i).height(n),i/n>e.aspectRatio?(e.width(i).height("auto"),(o=(e.height()-n)/2)<0&&(o=0),e.css("top",-o)):(e.width("auto").height(n),(o=(e.width()-i)/2)<0&&(o=0),e.css("left",-o),0===o&&setTimeout(function(){t.fn.videoBG.setFullscreen(e)},500)),t("body > .videoBG_wrapper").width(i).height(n)},t.fn.videoBG.video=function(e){var o=t("<div/>");o.addClass("videoBG").css("position",e.position).css("z-index",e.zIndex).css("top",0).css("left",0).css("height",e.height).css("width",e.width).css("opacity",e.opacity).css("overflow","hidden");var i,n=t("<video/>");n.css("position","relative").css("z-index",e.zIndex).attr("poster",e.poster).css("top",0).css("left",0).css("min-width","100%").css("min-height","100%"),e.autoplay&&n.attr("autoplay",e.autoplay),e.volume>0?n.prop("volume",e.volume):n.prop("volume",0),e.fullscreen&&(n.bind("canplay",function(){n.aspectRatio=n.width()/n.height(),t.fn.videoBG.setFullscreen(n)}),t(window).resize(function(){clearTimeout(i),i=setTimeout(function(){t.fn.videoBG.setFullscreen(n)},100)}),t.fn.videoBG.setFullscreen(n));var r=n[0];e.loop&&(loops_left=e.loop,n.bind("ended",function(){loops_left&&r.play(),!0!==loops_left&&loops_left--})),n.bind("canplay",function(){e.autoplay&&r.play()}),t.fn.videoBG.supportsVideo()&&(t.fn.videoBG.supportType("webm")&&""!=e.webm?n.attr("src",e.webm):t.fn.videoBG.supportType("mp4")&&""!=e.mp4?n.attr("src",e.mp4):n.attr("src",e.ogv));var s=t("<img/>");return s.attr("src",e.poster).css("position","absolute").css("z-index",e.zIndex).css("top",0).css("left",0).css("min-width","100%").css("min-height","100%"),t.fn.videoBG.supportsVideo()?o.html(n):o.html(s),e.textReplacement&&(o.css("min-height",1).css("min-width",1),n.css("min-height",1).css("min-width",1),s.css("min-height",1).css("min-width",1),o.height(e.height).width(e.width),n.height(e.height).width(e.width),s.height(e.height).width(e.width)),t.fn.videoBG.supportsVideo(),o},t.fn.videoBG.supportsVideo=function(){return document.createElement("video").canPlayType},t.fn.videoBG.supportType=function(e){if(!t.fn.videoBG.supportsVideo())return!1;var o=document.createElement("video");switch(e){case"webm":return o.canPlayType('video/webm; codecs="vp8, vorbis"');case"mp4":return o.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');case"ogv":return o.canPlayType('video/ogg; codecs="theora, vorbis"')}return!1},t.fn.videoBG.wrapper=function(){var e=t("<div/>");return e.addClass("videoBG_wrapper").css("position","absolute").css("top",0).css("left",0),e},t.fn.videoBG.defaults={mp4:"",ogv:"",webm:"",poster:"",autoplay:!0,loop:!0,scale:!1,position:"absolute",opacity:1,textReplacement:!1,zIndex:0,width:0,height:0,fullscreen:!1,imgFallback:!0}}(jQuery),function(t){var e=t(window),o=e.height();e.resize(function(){o=e.height()}),t.fn.parallax=function(i,n,r){var s,a=t(this),c=void 0!==document.body.style["-webkit-transform"];function l(){var i=e.scrollTop();a.each(function(){var e=t(this),r=e.offset().top,a=s(e),l=this.getBoundingClientRect();if(!(r+a<i||r>i+o)){var d=-1*Math.round(l.top*n);c?this.style["-webkit-transform"]="translateY("+d+"px)":this.style.top=d+"px"}})}c&&a.css("position","relative"),window.correctFirstTop4Parallax=function(){a.each(function(){a.offset().top})},window.correctFirstTop4Parallax(),s=r?function(t){return t.outerHeight(!0)}:function(t){return t.height()},(arguments.length<1||null===i)&&(i="50%"),(arguments.length<2||null===n)&&(n=.1),(arguments.length<3||null===r)&&(r=!0),t(window).resize(window.correctFirstTop4Parallax),e.bind("scroll",l).resize(l),"complete"!==document.readyState?window.addEventListener("load",function(){l()}):l()}}(jQuery),window.Tilda=window.Tilda||{};
